{"remainingRequest":"E:\\ishuberAdmin\\my-project\\node_modules\\babel-loader\\lib\\index.js!E:\\ishuberAdmin\\my-project\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\ishuberAdmin\\my-project\\src\\core\\permission\\permission.js","dependencies":[{"path":"E:\\ishuberAdmin\\my-project\\src\\core\\permission\\permission.js","mtime":1608170282571},{"path":"E:\\ishuberAdmin\\my-project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ishuberAdmin\\my-project\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\ishuberAdmin\\my-project\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJFOi9pc2h1YmVyQWRtaW4vbXktcHJvamVjdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmV4cG9ydCB2YXIgUEVSTUlTU0lPTl9FTlVNID0gewogICdhZGQnOiB7CiAgICBrZXk6ICdhZGQnLAogICAgbGFiZWw6ICfmlrDlop4nCiAgfSwKICAnZGVsZXRlJzogewogICAga2V5OiAnZGVsZXRlJywKICAgIGxhYmVsOiAn5Yig6ZmkJwogIH0sCiAgJ2VkaXQnOiB7CiAgICBrZXk6ICdlZGl0JywKICAgIGxhYmVsOiAn5L+u5pS5JwogIH0sCiAgJ3F1ZXJ5JzogewogICAga2V5OiAncXVlcnknLAogICAgbGFiZWw6ICfmn6Xor6InCiAgfSwKICAnZ2V0JzogewogICAga2V5OiAnZ2V0JywKICAgIGxhYmVsOiAn6K+m5oOFJwogIH0sCiAgJ2VuYWJsZSc6IHsKICAgIGtleTogJ2VuYWJsZScsCiAgICBsYWJlbDogJ+WQr+eUqCcKICB9LAogICdkaXNhYmxlJzogewogICAga2V5OiAnZGlzYWJsZScsCiAgICBsYWJlbDogJ+emgeeUqCcKICB9LAogICdpbXBvcnQnOiB7CiAgICBrZXk6ICdpbXBvcnQnLAogICAgbGFiZWw6ICflr7zlhaUnCiAgfSwKICAnZXhwb3J0JzogewogICAga2V5OiAnZXhwb3J0JywKICAgIGxhYmVsOiAn5a+85Ye6JwogIH0KfTsKLyoqDQogKiA8YS1idXR0b24gdi1pZj0iJGF1dGgoJ2Zvcm0uZWRpdCcpIj5CdXR0b248L2EtYnV0dG9uPg0KICogQHBhcmFtIFZ1ZQ0KICovCgpmdW5jdGlvbiBwbHVnaW4oVnVlKSB7CiAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHsKICAgIHJldHVybjsKICB9CgogICFWdWUucHJvdG90eXBlLiRhdXRoICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZ1ZS5wcm90b3R5cGUsIHsKICAgICRhdXRoOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAocGVybWlzc2lvbnMpIHsKICAgICAgICAgIHZhciBfcGVybWlzc2lvbnMkc3BsaXQgPSBwZXJtaXNzaW9ucy5zcGxpdCgnLicpLAogICAgICAgICAgICAgIF9wZXJtaXNzaW9ucyRzcGxpdDIgPSBfc2xpY2VkVG9BcnJheShfcGVybWlzc2lvbnMkc3BsaXQsIDIpLAogICAgICAgICAgICAgIHBlcm1pc3Npb24gPSBfcGVybWlzc2lvbnMkc3BsaXQyWzBdLAogICAgICAgICAgICAgIGFjdGlvbiA9IF9wZXJtaXNzaW9ucyRzcGxpdDJbMV07CgogICAgICAgICAgdmFyIHBlcm1pc3Npb25MaXN0ID0gX3RoaXMuJHN0b3JlLmdldHRlcnMucm9sZXMucGVybWlzc2lvbnM7CiAgICAgICAgICByZXR1cm4gcGVybWlzc2lvbkxpc3QuZmluZChmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIHJldHVybiB2YWwucGVybWlzc2lvbklkID09PSBwZXJtaXNzaW9uOwogICAgICAgICAgfSkuYWN0aW9uTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKHZhbCkgewogICAgICAgICAgICByZXR1cm4gdmFsID09PSBhY3Rpb247CiAgICAgICAgICB9KSA+IC0xOwogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9KTsKICAhVnVlLnByb3RvdHlwZS4kZW51bSAmJiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhWdWUucHJvdG90eXBlLCB7CiAgICAkZW51bTogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAvLyBjb25zdCBfdGhpcyA9IHRoaXM7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgIHZhciByZXN1bHQgPSBQRVJNSVNTSU9OX0VOVU07CiAgICAgICAgICB2YWwgJiYgdmFsLnNwbGl0KCcuJykuZm9yRWFjaChmdW5jdGlvbiAodikgewogICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgJiYgcmVzdWx0W3ZdIHx8IG51bGw7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0pOwp9CgpleHBvcnQgZGVmYXVsdCBwbHVnaW47"},{"version":3,"sources":["E:/ishuberAdmin/my-project/src/core/permission/permission.js"],"names":["PERMISSION_ENUM","key","label","plugin","Vue","installed","prototype","$auth","Object","defineProperties","get","_this","permissions","split","permission","action","permissionList","$store","getters","roles","find","val","permissionId","actionList","findIndex","$enum","result","forEach","v"],"mappings":";;;;;;;AAAA,OAAO,IAAMA,eAAe,GAAG;AAC7B,SAAO;AAAEC,IAAAA,GAAG,EAAE,KAAP;AAAcC,IAAAA,KAAK,EAAE;AAArB,GADsB;AAE7B,YAAU;AAAED,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,KAAK,EAAE;AAAxB,GAFmB;AAG7B,UAAQ;AAAED,IAAAA,GAAG,EAAE,MAAP;AAAeC,IAAAA,KAAK,EAAE;AAAtB,GAHqB;AAI7B,WAAS;AAAED,IAAAA,GAAG,EAAE,OAAP;AAAgBC,IAAAA,KAAK,EAAE;AAAvB,GAJoB;AAK7B,SAAO;AAAED,IAAAA,GAAG,EAAE,KAAP;AAAcC,IAAAA,KAAK,EAAE;AAArB,GALsB;AAM7B,YAAU;AAAED,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,KAAK,EAAE;AAAxB,GANmB;AAO7B,aAAW;AAAED,IAAAA,GAAG,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAPkB;AAQ7B,YAAU;AAAED,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,KAAK,EAAE;AAAxB,GARmB;AAS7B,YAAU;AAAED,IAAAA,GAAG,EAAE,QAAP;AAAiBC,IAAAA,KAAK,EAAE;AAAxB;AATmB,CAAxB;AAYP;AACA;AACA;AACA;;AACA,SAASC,MAAT,CAAiBC,GAAjB,EAAsB;AACpB,MAAID,MAAM,CAACE,SAAX,EAAsB;AACpB;AACD;;AAED,GAACD,GAAG,CAACE,SAAJ,CAAcC,KAAf,IAAwBC,MAAM,CAACC,gBAAP,CAAwBL,GAAG,CAACE,SAA5B,EAAuC;AAC7DC,IAAAA,KAAK,EAAE;AACLG,MAAAA,GADK,iBACE;AACL,YAAMC,KAAK,GAAG,IAAd;;AACA,eAAO,UAACC,WAAD,EAAiB;AAAA,mCACOA,WAAW,CAACC,KAAZ,CAAkB,GAAlB,CADP;AAAA;AAAA,cACfC,UADe;AAAA,cACHC,MADG;;AAEtB,cAAMC,cAAc,GAAGL,KAAK,CAACM,MAAN,CAAaC,OAAb,CAAqBC,KAArB,CAA2BP,WAAlD;AACA,iBAAOI,cAAc,CAACI,IAAf,CAAoB,UAACC,GAAD,EAAS;AAClC,mBAAOA,GAAG,CAACC,YAAJ,KAAqBR,UAA5B;AACD,WAFM,EAEJS,UAFI,CAEOC,SAFP,CAEiB,UAACH,GAAD,EAAS;AAC/B,mBAAOA,GAAG,KAAKN,MAAf;AACD,WAJM,IAIF,CAAC,CAJN;AAKD,SARD;AASD;AAZI;AADsD,GAAvC,CAAxB;AAiBA,GAACX,GAAG,CAACE,SAAJ,CAAcmB,KAAf,IAAwBjB,MAAM,CAACC,gBAAP,CAAwBL,GAAG,CAACE,SAA5B,EAAuC;AAC7DmB,IAAAA,KAAK,EAAE;AACLf,MAAAA,GADK,iBACE;AACL;AACA,eAAO,UAACW,GAAD,EAAS;AACd,cAAIK,MAAM,GAAG1B,eAAb;AACAqB,UAAAA,GAAG,IAAIA,GAAG,CAACR,KAAJ,CAAU,GAAV,EAAec,OAAf,CAAuB,UAAAC,CAAC,EAAI;AACjCF,YAAAA,MAAM,GAAGA,MAAM,IAAIA,MAAM,CAACE,CAAD,CAAhB,IAAuB,IAAhC;AACD,WAFM,CAAP;AAGA,iBAAOF,MAAP;AACD,SAND;AAOD;AAVI;AADsD,GAAvC,CAAxB;AAcD;;AAED,eAAevB,MAAf","sourcesContent":["export const PERMISSION_ENUM = {\r\n  'add': { key: 'add', label: '新增' },\r\n  'delete': { key: 'delete', label: '删除' },\r\n  'edit': { key: 'edit', label: '修改' },\r\n  'query': { key: 'query', label: '查询' },\r\n  'get': { key: 'get', label: '详情' },\r\n  'enable': { key: 'enable', label: '启用' },\r\n  'disable': { key: 'disable', label: '禁用' },\r\n  'import': { key: 'import', label: '导入' },\r\n  'export': { key: 'export', label: '导出' }\r\n}\r\n\r\n/**\r\n * <a-button v-if=\"$auth('form.edit')\">Button</a-button>\r\n * @param Vue\r\n */\r\nfunction plugin (Vue) {\r\n  if (plugin.installed) {\r\n    return\r\n  }\r\n\r\n  !Vue.prototype.$auth && Object.defineProperties(Vue.prototype, {\r\n    $auth: {\r\n      get () {\r\n        const _this = this\r\n        return (permissions) => {\r\n          const [permission, action] = permissions.split('.')\r\n          const permissionList = _this.$store.getters.roles.permissions\r\n          return permissionList.find((val) => {\r\n            return val.permissionId === permission\r\n          }).actionList.findIndex((val) => {\r\n            return val === action\r\n          }) > -1\r\n        }\r\n      }\r\n    }\r\n  })\r\n\r\n  !Vue.prototype.$enum && Object.defineProperties(Vue.prototype, {\r\n    $enum: {\r\n      get () {\r\n        // const _this = this;\r\n        return (val) => {\r\n          let result = PERMISSION_ENUM\r\n          val && val.split('.').forEach(v => {\r\n            result = result && result[v] || null\r\n          })\r\n          return result\r\n        }\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nexport default plugin\r\n"]}]}